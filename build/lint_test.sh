#!/bin/bash

lint_and_test() {
    echo -e "----------------------------------------------------"
    echo -e "Running linter"
    echo -e "----------------------------------------------------"
    if yarn lint; then
        echo -e "\033[1;32m----------------------------------------------------"
        echo -e "\033[1;32mDone linting"
        echo -e "\033[1;32m----------------------------------------------------"
    else
        echo -e "\033[1;31m----------------------------------------------------"
        echo -e "\033[1;31mFailed linting!"
        echo -e "\033[1;31m----------------------------------------------------"
        exit 1;
    fi


    echo -e "----------------------------------------------------"
    echo -e "Running flow"
    echo -e "----------------------------------------------------"
    if yarn flow check; then
        echo -e "\033[1;32m----------------------------------------------------"
        echo -e "\033[1;32mDone flow check"
        echo -e "\033[1;32m----------------------------------------------------"
    else
        echo -e "\033[1;31m----------------------------------------------------"
        echo -e "\033[1;31mFailed flow check!"
        echo -e "\033[1;31m----------------------------------------------------"
        exit 1;
    fi


    echo -e "----------------------------------------------------"
    echo -e "Running tests"
    echo -e "----------------------------------------------------"
    if yarn test; then
        echo -e "\033[1;32m----------------------------------------------------"
        echo -e "\033[1;32mDone testing"
        echo -e "\033[1;32m----------------------------------------------------"
    else
        echo -e "\033[1;31m----------------------------------------------------"
        echo -e "\033[1;31mFailed testing!"
        echo -e "\033[1;31m----------------------------------------------------"
        exit 1;
    fi
}
